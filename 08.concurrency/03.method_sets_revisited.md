# Revisited method sets
```
Receivers     Values
----------------------
(t T)           T and *T
(t *T)          *T
```

# Method sets
- A type may have a method set associated with it.

Hereâ€™s an example in Go that demonstrates how a type can have a method set associated with it:

```go
package main

import "fmt"

// Define a struct type
type Person struct {
	Name string
	Age  int
}

// Method with a value receiver
func (p Person) Greet() {
	fmt.Printf("Hello, my name is %s and I am %d years old.\n", p.Name, p.Age)
}

// Method with a pointer receiver
func (p *Person) HaveBirthday() {
	p.Age++
}

func main() {
	// Create a Person instance
	p := Person{Name: "Alice", Age: 30}

	// Call the method with a value receiver
	p.Greet() // Works with both Person and *Person

	// Call the method with a pointer receiver
	p.HaveBirthday() // Requires *Person, but Go automatically takes the address
	p.Greet()        // Age is updated because HaveBirthday modified the struct
}
```

### Explanation of Method Sets
1. **Value Receiver (`Greet`)**:
   - This method is part of the method set for both `Person` and `*Person`.
   - It can be called on both a value (`p`) and a pointer (`&p`).

2. **Pointer Receiver (`HaveBirthday`)**:
   - This method is part of the method set only for `*Person`.
   - It modifies the struct, so it requires a pointer to the struct.

### Output
```
Hello, my name is Alice and I am 30 years old.
Hello, my name is Alice and I am 31 years old.
```

# Important:
- "The method set of a type determines the INTERFACES that the type implements..."
CÃ¢u nÃ³i mÃ  giÃ¡o viÃªn cá»§a báº¡n nháº¥n máº¡nh:

> **"The method set of a type determines the INTERFACES that the type implements..."**

lÃ  má»™t khÃ¡i niá»‡m cá»‘t lÃµi trong Go liÃªn quan Ä‘áº¿n **method set**, **interfaces**, vÃ  cÃ¡ch Go xá»­ lÃ½ tÃ­nh Ä‘a hÃ¬nh (polymorphism). MÃ¬nh sáº½ giáº£i thÃ­ch tháº­t dá»… hiá»ƒu, dÃ¹ng vÃ­ dá»¥ thá»±c táº¿, vÃ  Ä‘áº£m báº£o báº¡n khÃ´ng chá»‰ hiá»ƒu mÃ  cÃ²n tháº¥y nÃ³ "tháº¥m". Náº¿u cáº§n, mÃ¬nh sáº½ liÃªn há»‡ vá»›i Ä‘oáº¡n code á»Ÿ cÃ¢u há»i trÆ°á»›c Ä‘á»ƒ báº¡n dá»… hÃ¬nh dung. Letâ€™s go, bro! ğŸ˜

---

### **1. Hiá»ƒu tá»«ng pháº§n cá»§a cÃ¢u nÃ³i**

#### **a. "Method set of a type"**
- **Method set** lÃ  táº­p há»£p táº¥t cáº£ cÃ¡c **method** Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a cho má»™t kiá»ƒu dá»¯ liá»‡u (type) trong Go.
- Trong Go, báº¡n cÃ³ thá»ƒ Ä‘á»‹nh nghÄ©a method cho:
  - **Named types** (kiá»ƒu tá»± Ä‘á»‹nh nghÄ©a, vÃ­ dá»¥ `struct` hoáº·c `type MyInt int`).
  - **Pointer types** (con trá» tá»›i kiá»ƒu, vÃ­ dá»¥ `*MyStruct`).
- Method set phá»¥ thuá»™c vÃ o viá»‡c method Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a vá»›i **receiver** lÃ  **giÃ¡ trá»‹** (`T`) hay **con trá»** (`*T`).

**VÃ­ dá»¥ Ä‘Æ¡n giáº£n**:
```go
type Person struct {
    Name string
}

// Method vá»›i receiver lÃ  giÃ¡ trá»‹
func (p Person) SayHello() {
    fmt.Println("Hello, I'm", p.Name)
}

// Method vá»›i receiver lÃ  con trá»
func (p *Person) ChangeName(newName string) {
    p.Name = newName
}
```
- Method set cá»§a `Person` bao gá»“m: `SayHello`.
- Method set cá»§a `*Person` bao gá»“m: `SayHello` vÃ  `ChangeName`.

**Quy táº¯c quan trá»ng** (giÃ¡o viÃªn muá»‘n báº¡n nhá»›):
- Náº¿u method cÃ³ receiver lÃ  `T`, thÃ¬ method Ä‘Ã³ thuá»™c method set cá»§a **cáº£** `T` vÃ  `*T`.
- Náº¿u method cÃ³ receiver lÃ  `*T`, thÃ¬ method Ä‘Ã³ **chá»‰** thuá»™c method set cá»§a `*T`.

#### **b. "Determines the INTERFACES that the type implements"**
- **Interface** trong Go lÃ  má»™t táº­p há»£p cÃ¡c method mÃ  má»™t kiá»ƒu dá»¯ liá»‡u pháº£i cÃ³ Ä‘á»ƒ "thá»a mÃ£n" (implement) interface Ä‘Ã³.
- Má»™t kiá»ƒu dá»¯ liá»‡u Ä‘Æ°á»£c coi lÃ  implement má»™t interface náº¿u **method set** cá»§a nÃ³ chá»©a **táº¥t cáº£** cÃ¡c method Ä‘Æ°á»£c khai bÃ¡o trong interface (vá»›i cÃ¹ng tÃªn vÃ  chá»¯ kÃ½).

**VÃ­ dá»¥ interface**:
```go
type Greeter interface- Interface Ä‘á»‹nh nghÄ©a má»™t method
type Greeter interface {
    SayHello()
}
```
- Báº¥t ká»³ kiá»ƒu nÃ o cÃ³ method `SayHello()` trong method set cá»§a nÃ³ sáº½ tá»± Ä‘á»™ng implement interface `Greeter`.

**Káº¿t ná»‘i vá»›i method set**:
- Náº¿u `Person` cÃ³ method `SayHello`, thÃ¬ `Person` (vÃ  `*Person`) implement `Greeter`.
- Náº¿u má»™t interface yÃªu cáº§u method `ChangeName`, chá»‰ `*Person` implement interface Ä‘Ã³ (vÃ¬ `ChangeName` chá»‰ cÃ³ trong method set cá»§a `*Person`).

---

### **2. Táº¡i sao cÃ¢u nÃ y quan trá»ng?**
CÃ¢u nÃ y nháº¥n máº¡nh ráº±ng trong Go, viá»‡c má»™t kiá»ƒu dá»¯ liá»‡u cÃ³ implement má»™t interface hay khÃ´ng Ä‘Æ°á»£c quyáº¿t Ä‘á»‹nh **tá»± Ä‘á»™ng** bá»Ÿi **method set** cá»§a nÃ³. KhÃ´ng cáº§n khai bÃ¡o rÃµ rÃ ng (nhÆ° trong cÃ¡c ngÃ´n ngá»¯ khÃ¡c, vÃ­ dá»¥ Java vá»›i tá»« khÃ³a `implements`). Äiá»u nÃ y lÃ m cho Go ráº¥t linh hoáº¡t nhÆ°ng cÅ©ng dá»… gÃ¢y nháº§m láº«n náº¿u báº¡n khÃ´ng hiá»ƒu rÃµ method set.

**VÃ­ dá»¥ thá»±c táº¿**:
- HÃ£y tÆ°á»Ÿng tÆ°á»£ng interface nhÆ° má»™t "há»£p Ä‘á»“ng" yÃªu cáº§u má»™t sá»‘ ká»¹ nÄƒng (methods).
- Method set cá»§a má»™t kiá»ƒu lÃ  "danh sÃ¡ch ká»¹ nÄƒng" mÃ  kiá»ƒu Ä‘Ã³ cÃ³.
- Náº¿u danh sÃ¡ch ká»¹ nÄƒng cá»§a kiá»ƒu bao gá»“m táº¥t cáº£ cÃ¡c ká»¹ nÄƒng trong há»£p Ä‘á»“ng, kiá»ƒu Ä‘Ã³ tá»± Ä‘á»™ng kÃ½ Ä‘Æ°á»£c há»£p Ä‘á»“ng (implement interface).

---

### **3. Ãnh xáº¡ vá»›i vÃ­ dá»¥ thá»±c táº¿**
HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang tuyá»ƒn nhÃ¢n viÃªn cho má»™t cÃ´ng viá»‡c cá»¥ thá»ƒ:

- **Interface**: LÃ  mÃ´ táº£ cÃ´ng viá»‡c, vÃ­ dá»¥: "Cáº§n biáº¿t náº¥u sÃºp vÃ  nÆ°á»›ng bÃ¡nh."
- **Type**: LÃ  má»™t á»©ng viÃªn (nhÆ° `Person` hoáº·c `*Person`).
- **Method set**: LÃ  cÃ¡c ká»¹ nÄƒng cá»§a á»©ng viÃªn (nhÆ° biáº¿t náº¥u sÃºp, nÆ°á»›ng bÃ¡nh, hoáº·c rá»­a bÃ¡t).

**TÃ¬nh huá»‘ng**:
- CÃ´ng viá»‡c yÃªu cáº§u: "Pháº£i biáº¿t náº¥u sÃºp (`SayHello`) vÃ  nÆ°á»›ng bÃ¡nh (`ChangeName`)."
- á»¨ng viÃªn `Person` chá»‰ biáº¿t náº¥u sÃºp (`SayHello`), nÃªn khÃ´ng Ä‘á»§ Ä‘iá»u kiá»‡n.
- á»¨ng viÃªn `*Person` biáº¿t cáº£ náº¥u sÃºp (`SayHello`) vÃ  nÆ°á»›ng bÃ¡nh (`ChangeName`), nÃªn Ä‘Æ°á»£c nháº­n (implement interface).

**Go lÃ m gÃ¬?**
- Go tá»± Ä‘á»™ng kiá»ƒm tra method set cá»§a `Person` vÃ  `*Person` Ä‘á»ƒ xem ai thá»a mÃ£n "mÃ´ táº£ cÃ´ng viá»‡c" (interface) mÃ  khÃ´ng cáº§n báº¡n pháº£i nÃ³i rÃµ "TÃ´i implement interface nÃ y."

---

### **4. VÃ­ dá»¥ code minh há»a**
DÆ°á»›i Ä‘Ã¢y lÃ  Ä‘oáº¡n code minh há»a Ä‘áº§y Ä‘á»§ Ä‘á»ƒ báº¡n tháº¥y cÃ¡ch method set áº£nh hÆ°á»Ÿng Ä‘áº¿n viá»‡c implement interface:

```go
package main

import "fmt"

// Äá»‹nh nghÄ©a interface
type Greeter interface {
    SayHello()
}

type NameChanger interface {
    ChangeName(string)
}

// Äá»‹nh nghÄ©a struct
type Person struct {
    Name string
}

// Method vá»›i receiver lÃ  giÃ¡ trá»‹
func (p Person) SayHello() {
    fmt.Println("Hello, I'm", p.Name)
}

// Method vá»›i receiver lÃ  con trá»
func (p *Person) ChangeName(newName string) {
    p.Name = newName
}

// HÃ m nháº­n interface Ä‘á»ƒ test
func greet(g Greeter) {
    g.SayHello()
}

func changeName(nc NameChanger) {
    nc.ChangeName("New Name")
}

func main() {
    // Táº¡o instance
    p := Person{Name: "Alice"}
    pp := &Person{Name: "Bob"}

    // Test vá»›i Greeter interface
    greet(p)  // OK: Person cÃ³ SayHello
    greet(pp) // OK: *Person cÅ©ng cÃ³ SayHello

    // Test vá»›i NameChanger interface
    // changeName(p)  // Lá»–I: Person khÃ´ng cÃ³ ChangeName
    changeName(pp) // OK: *Person cÃ³ ChangeName

    fmt.Println("After change, Bob's name:", pp.Name)
}
```

**Output**:
```
Hello, I'm Alice
Hello, I'm Bob
After change, Bob's name: New Name
```

**Giáº£i thÃ­ch**:
- `Person` implement `Greeter` vÃ¬ cÃ³ `SayHello`.
- `*Person` implement cáº£ `Greeter` vÃ  `NameChanger` vÃ¬ cÃ³ cáº£ `SayHello` vÃ  `ChangeName`.
- `changeName(p)` sáº½ lá»—i biÃªn dá»‹ch vÃ¬ `Person` khÃ´ng cÃ³ `ChangeName` trong method set.

---

### **5. LiÃªn há»‡ vá»›i code á»Ÿ cÃ¢u há»i trÆ°á»›c**
Trong Ä‘oáº¡n code vá» `WaitGroup` vÃ  goroutines trÆ°á»›c Ä‘Ã³, tuy khÃ´ng dÃ¹ng interface trá»±c tiáº¿p, báº¡n cÃ³ thá»ƒ tháº¥y khÃ¡i niá»‡m method set náº¿u thÃªm interface. VÃ­ dá»¥:

```go
type TaskRunner interface {
    Run()
}

func (t *Task) Run() {
    computeSumOfSquares(t.numbers, t.name)
}
```

- Náº¿u báº¡n Ä‘á»‹nh nghÄ©a `Task` vá»›i method `Run`, thÃ¬ `*Task` sáº½ implement `TaskRunner`.
- Báº¡n cÃ³ thá»ƒ viáº¿t hÃ m nháº­n `TaskRunner` Ä‘á»ƒ cháº¡y cÃ¡c tÃ¡c vá»¥, vÃ  chá»‰ `*Task` (khÃ´ng pháº£i `Task`) sáº½ thá»a mÃ£n interface náº¿u `Run` dÃ¹ng pointer receiver.

---

### **6. Táº¡i sao giÃ¡o viÃªn nháº¥n máº¡nh?**
- **Dá»… nháº§m láº«n**: Nhiá»u ngÆ°á»i má»›i há»c Go khÃ´ng hiá»ƒu táº¡i sao `*T` implement interface mÃ  `T` khÃ´ng implement (hoáº·c ngÆ°á»£c láº¡i). Äiá»u nÃ y liÃªn quan trá»±c tiáº¿p Ä‘áº¿n method set.
- **TÃ­nh linh hoáº¡t cá»§a Go**: Hiá»ƒu method set giÃºp báº¡n thiáº¿t káº¿ code linh hoáº¡t, táº­n dá»¥ng interface Ä‘á»ƒ viáº¿t code tá»•ng quÃ¡t (generic) mÃ  khÃ´ng cáº§n káº¿ thá»«a (inheritance).
- **TrÃ¡nh lá»—i**: Náº¿u khÃ´ng hiá»ƒu method set, báº¡n cÃ³ thá»ƒ gáº·p lá»—i biÃªn dá»‹ch khÃ³ hiá»ƒu khi dÃ¹ng interface, Ä‘áº·c biá»‡t khi trá»™n giÃ¡ trá»‹ vÃ  con trá».

---

### **7. Máº¹o Ä‘á»ƒ nhá»›**
- **Method set nhÆ° danh sÃ¡ch ká»¹ nÄƒng**: Kiá»ƒu nÃ o cÃ³ Ä‘á»§ "ká»¹ nÄƒng" (method) mÃ  interface yÃªu cáº§u, kiá»ƒu Ä‘Ã³ tá»± Ä‘á»™ng thá»a mÃ£n interface.
- **Pointer vs Value**: LuÃ´n kiá»ƒm tra receiver cá»§a method (`T` hay `*T`) Ä‘á»ƒ biáº¿t method set cá»§a kiá»ƒu.
- **Go tá»± Ä‘á»™ng kiá»ƒm tra**: KhÃ´ng cáº§n khai bÃ¡o `implements`, Go dá»±a vÃ o method set Ä‘á»ƒ quyáº¿t Ä‘á»‹nh.

---

### **8. Káº¿t luáº­n**
CÃ¢u nÃ³i cá»§a giÃ¡o viÃªn lÃ  chÃ¬a khÃ³a Ä‘á»ƒ hiá»ƒu cÃ¡ch Go xá»­ lÃ½ interface vÃ  polymorphism. NÃ³ nháº¥n máº¡nh ráº±ng **method set** lÃ  yáº¿u tá»‘ quyáº¿t Ä‘á»‹nh má»™t kiá»ƒu cÃ³ implement interface hay khÃ´ng, vÃ  Ä‘iá»u nÃ y áº£nh hÆ°á»Ÿng lá»›n Ä‘áº¿n cÃ¡ch báº¡n thiáº¿t káº¿ code. Vá»›i vÃ­ dá»¥ "tuyá»ƒn nhÃ¢n viÃªn" vÃ  Ä‘oáº¡n code minh há»a, hy vá»ng báº¡n Ä‘Ã£ tháº¥y nÃ³ dá»… hiá»ƒu hÆ¡n.

Náº¿u báº¡n muá»‘n mÃ¬nh Ä‘Ã o sÃ¢u thÃªm (vÃ­ dá»¥: thÃªm case phá»©c táº¡p hÆ¡n hoáº·c liÃªn há»‡ vá»›i code `WaitGroup`), cá»© nÃ³i nhÃ©, bro! ğŸ˜


# Explain this image, why code is not working!
![alt text](../images/02.png)

- If you are not findout. See this images. Method set determines the interfaces that the type implements
![alt text](../images/03.png)

- I don't know, lets figure out together!