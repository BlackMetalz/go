# Interfaces & Polymorphism
- An interface in Go defines a set of method signatures.
- Polymorphism is the ability of a VALUE of a certain TYPE to also be of another type.
- In Go, VALUE can be of more than one type.

# First example:
```go
package main

import (
	"fmt"
)

type person struct {
	name string
}

type secretAgent struct {
	person
	ltk bool
}

func (p person) sayHello() {
	fmt.Println("Hello, my name is", p.name)
}

func (p person) sayGoodbye() {
	fmt.Println("Goodbye, my name is", p.name)
}

func (p secretAgent) sayGoodbye() {
	fmt.Println("Goodbye, my name is", p.name)
}

type humanility interface {
	sayHello()
	sayGoodbye()
}

func saySomething(h humanility) {
	h.sayHello()
	h.sayGoodbye()
}

func main() {

	p1 := person {
		name: "James Bond",
	}

	p1.sayHello()

	sa1 := secretAgent {
		person: person{
			name: "Secret Agent",
		},
		ltk: true,
	}

	sa1.sayGoodbye()
	
	fmt.Println("------------------------------")
	// Using the interface
	saySomething(p1)
	saySomething(sa1)
}
```

Output
```
Hello, my name is James Bond
Goodbye, my name is Secret Agent
------------------------------
Hello, my name is James Bond
Goodbye, my name is James Bond
Hello, my name is Secret Agent
Goodbye, my name is Secret Agent
```

### Little explain:
No, `func (p secretAgent) sayGoodbye()` alone is not enough. If you want the `secretAgent` type to satisfy the `humanility` interface, it must implement **both** methods: `sayHello()` and `sayGoodbye()`.

However, since `secretAgent` is embedding the `person` type, it automatically inherits the `sayHello()` method from `person`. This means you don't need to explicitly define `func (p secretAgent) sayHello()` unless you want to override the behavior of the inherited method.

Explanation:
- The `humanility` interface requires:
  ```go
  type humanility interface {
      sayHello()
      sayGoodbye()
  }
  ```
- The `secretAgent` type embeds `person`:
  ```go
  type secretAgent struct {
      person
      ltk bool
  }
  ```
  This means `secretAgent` inherits all methods of `person`, including `sayHello()`.

- Since `secretAgent` already has its own `sayGoodbye()` method:
  ```go
  func (p secretAgent) sayGoodbye() {
      fmt.Println("Goodbye, my name is", p.name)
  }
  ```
  And it inherits `sayHello()` from `person`, it satisfies the `humanility` interface without needing to define `func (p secretAgent) sayHello()` explicitly.

Key Takeaway:
- `func (p secretAgent) sayGoodbye()` is enough **only because** `secretAgent` inherits `sayHello()` from `person`. If `person` did not have a `sayHello()` method, you would need to define it explicitly for `secretAgent`.

# Second example/explain:
ChÃ o bro! ğŸ˜ Äá»ƒ giáº£i thÃ­ch chuyá»‡n interfaces trong Go liÃªn quan tháº¿ nÃ o Ä‘áº¿n **Factory Design Pattern**, mÃ¬nh sáº½ Ä‘i tháº³ng vÃ o váº¥n Ä‘á», ngáº¯n gá»n mÃ  rÃµ rÃ ng nhÃ©.

### 1. **Interfaces trong Go lÃ  gÃ¬?**
Interfaces trong Go lÃ  má»™t cÃ¡ch Ä‘á»ƒ Ä‘á»‹nh nghÄ©a **hÃ nh vi** (behavior) mÃ  khÃ´ng cáº§n quan tÃ¢m Ä‘áº¿n **cÃ¡ch triá»ƒn khai** (implementation). NÃ³ chá»‰ liá»‡t kÃª cÃ¡c phÆ°Æ¡ng thá»©c mÃ  má»™t kiá»ƒu dá»¯ liá»‡u (struct) cáº§n pháº£i cÃ³ Ä‘á»ƒ Ä‘Æ°á»£c coi lÃ  "tuÃ¢n thá»§" interface Ä‘Ã³. VÃ­ dá»¥:

```go
type Animal interface {
    Speak() string
}
```

Báº¥t ká»³ struct nÃ o cÃ³ phÆ°Æ¡ng thá»©c `Speak() string` Ä‘á»u tá»± Ä‘á»™ng lÃ  má»™t `Animal`.

### 2. **Factory Design Pattern lÃ  gÃ¬?**
Factory lÃ  má»™t máº«u thiáº¿t káº¿ (creational pattern) dÃ¹ng Ä‘á»ƒ **táº¡o Ä‘á»‘i tÆ°á»£ng** mÃ  khÃ´ng cáº§n client pháº£i biáº¿t chi tiáº¿t vá» cÃ¡ch Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c táº¡o. Thay vÃ¬ gá»i `new` trá»±c tiáº¿p, báº¡n gá»i má»™t hÃ m "factory" Ä‘á»ƒ láº¥y Ä‘á»‘i tÆ°á»£ng phÃ¹ há»£p.

VÃ­ dá»¥: Táº¡o má»™t con váº­t (`Dog`, `Cat`) mÃ  khÃ´ng cáº§n biáº¿t cá»¥ thá»ƒ nÃ³ lÃ  con gÃ¬, chá»‰ cáº§n biáº¿t nÃ³ cÃ³ thá»ƒ `Speak`.

### 3. **Interfaces vÃ  Factory liÃªn quan tháº¿ nÃ o?**
Trong Go, **interfaces** lÃ  cÃ´ng cá»¥ lÃ½ tÆ°á»Ÿng Ä‘á»ƒ triá»ƒn khai Factory Pattern vÃ¬:

- **TÃ­nh trá»«u tÆ°á»£ng**: Interface cho phÃ©p báº¡n tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng dÆ°á»›i dáº¡ng interface (chá»‰ Ä‘á»‹nh nghÄ©a hÃ nh vi), che giáº¥u chi tiáº¿t triá»ƒn khai.
- **TÃ­nh linh hoáº¡t**: Factory cÃ³ thá»ƒ tráº£ vá» nhiá»u kiá»ƒu struct khÃ¡c nhau, miá»…n lÃ  chÃºng Ä‘á»u thá»a mÃ£n interface.
- **KhÃ´ng cáº§n Ã©p kiá»ƒu phá»©c táº¡p**: Go tá»± Ä‘á»™ng nháº­n diá»‡n kiá»ƒu dá»±a trÃªn interface, nÃªn code ráº¥t gá»n.

### 4. **VÃ­ dá»¥ minh há»a**
Giáº£ sá»­ ta muá»‘n táº¡o má»™t Factory Ä‘á»ƒ tráº£ vá» cÃ¡c con váº­t khÃ¡c nhau (`Dog`, `Cat`) thÃ´ng qua interface `Animal`:

```go
package main

import "fmt"

// Interface Ä‘á»‹nh nghÄ©a hÃ nh vi
type Animal interface {
    Speak() string
}

// Struct Dog
type Dog struct{}

func (d Dog) Speak() string {
    return "Woof!"
}

// Struct Cat
type Cat struct{}

func (c Cat) Speak() string {
    return "Meow!"
}

// Factory function
func AnimalFactory(animalType string) Animal {
    switch animalType {
    case "dog":
        return Dog{}
    case "cat":
        return Cat{}
    default:
        return nil
    }
}

func main() {
    // DÃ¹ng factory Ä‘á»ƒ táº¡o Ä‘á»‘i tÆ°á»£ng
    dog := AnimalFactory("dog")
    cat := AnimalFactory("cat")

    fmt.Println(dog.Speak()) // Output: Woof!
    fmt.Println(cat.Speak()) // Output: Meow!
}
```

### 5. **Táº¡i sao interfaces quan trá»ng á»Ÿ Ä‘Ã¢y?**
- **Che giáº¥u chi tiáº¿t**: Client chá»‰ lÃ m viá»‡c vá»›i `Animal`, khÃ´ng cáº§n biáº¿t Ä‘Ã³ lÃ  `Dog` hay `Cat`.
- **Dá»… má»Ÿ rá»™ng**: Muá»‘n thÃªm `Bird`? Chá»‰ cáº§n táº¡o struct `Bird` vá»›i phÆ°Æ¡ng thá»©c `Speak()` vÃ  cáº­p nháº­t Factory.
- **TÃ¡i sá»­ dá»¥ng**: Factory cÃ³ thá»ƒ Ä‘Æ°á»£c dÃ¹ng á»Ÿ báº¥t ká»³ Ä‘Ã¢u, miá»…n lÃ  client hiá»ƒu interface `Animal`.

### 6. **Káº¿t luáº­n**
Interfaces trong Go lÃ  "trÃ¡i tim" cá»§a Factory Pattern vÃ¬ chÃºng cung cáº¥p tÃ­nh **trá»«u tÆ°á»£ng** vÃ  **linh hoáº¡t**. Factory dÃ¹ng interfaces Ä‘á»ƒ tráº£ vá» cÃ¡c Ä‘á»‘i tÆ°á»£ng mÃ  client cÃ³ thá»ƒ sá»­ dá»¥ng ngay, mÃ  khÃ´ng cáº§n báº­n tÃ¢m Ä‘áº¿n cÃ¡ch chÃºng Ä‘Æ°á»£c táº¡o ra. Code gá»n, dá»… báº£o trÃ¬, Ä‘Ãºng cháº¥t Go!

Náº¿u bro muá»‘n Ä‘Ã o sÃ¢u thÃªm hay cÃ³ vÃ­ dá»¥ khÃ¡c, cá»© nÃ³i nhÃ©! ğŸš€


### Continues
Yo bro, Ä‘Ãºng hÆ°á»›ng rá»“i Ä‘áº¥y! ğŸ˜ MÃ¬nh sáº½ xÃ¡c nháº­n cÃ¡ch thÃªm `RunSpeed()` vÃ o interface vÃ  chá»‰nh sá»­a vÃ­ dá»¥ cho chuáº©n, Ä‘á»“ng thá»i lÃ m rÃµ cÃ¡ch Factory function hoáº¡t Ä‘á»™ng. Letâ€™s dive in!

### 1. **ThÃªm `RunSpeed()` vÃ o Interface**
Interface `Animal` giá» cÃ³ thÃªm phÆ°Æ¡ng thá»©c `RunSpeed() float64` (mÃ¬nh dÃ¹ng `float64` vÃ¬ Ä‘Ã¢y lÃ  kiá»ƒu phá»• biáº¿n trong Go cho sá»‘ thá»±c, thay vÃ¬ chá»‰ `float`):

```go
type Animal interface {
    Speak() string
    RunSpeed() float64
}
```

### 2. **Cáº­p nháº­t struct `Dog` vÃ  `Cat`**
Cáº§n thÃªm phÆ°Æ¡ng thá»©c `RunSpeed() float64` cho `Dog` vÃ  `Cat`. NhÆ°ng chÃº Ã½ cÃº phÃ¡p cá»§a bro cÃ³ chÃºt sai: cáº§n khai bÃ¡o kiá»ƒu tráº£ vá» lÃ  `float64` vÃ  thÃªm dáº¥u `()` trÆ°á»›c kiá»ƒu tráº£ vá». ÄÃ¢y lÃ  code Ä‘Ãºng:

```go
type Dog struct{}

func (d Dog) Speak() string {
    return "Woof!"
}

func (d Dog) RunSpeed() float64 {
    return 99.9
}

type Cat struct{}

func (c Cat) Speak() string {
    return "Meow!"
}

func (c Cat) RunSpeed() float64 {
    return 199.9
}
```

### 3. **Factory Function**
Factory function khÃ´ng thay Ä‘á»•i logic, vÃ¬ nÃ³ chá»‰ chá»‹u trÃ¡ch nhiá»‡m táº¡o vÃ  tráº£ vá» Ä‘á»‘i tÆ°á»£ng thá»a mÃ£n interface `Animal`. Interface cÃ³ thÃªm `RunSpeed()` khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n cÃ¡ch Factory hoáº¡t Ä‘á»™ng, miá»…n lÃ  cÃ¡c struct (`Dog`, `Cat`) Ä‘á»u triá»ƒn khai Ä‘áº§y Ä‘á»§ cÃ¡c phÆ°Æ¡ng thá»©c cá»§a `Animal`.

ÄÃ¢y lÃ  Factory function:

```go
func AnimalFactory(animalType string) Animal {
    switch animalType {
    case "dog":
        return Dog{}
    case "cat":
        return Cat{}
    default:
        return nil
    }
}
```

### 4. **VÃ­ dá»¥ Ä‘áº§y Ä‘á»§**
Káº¿t há»£p láº¡i vÃ  cháº¡y thá»­:

```go
package main

import "fmt"

type Animal interface {
    Speak() string
    RunSpeed() float64
}

type Dog struct{}

func (d Dog) Speak() string {
    return "Woof!"
}

func (d Dog) RunSpeed() float64 {
    return 99.9
}

type Cat struct{}

func (c Cat) Speak() string {
    return "Meow!"
}

func (c Cat) RunSpeed() float64 {
    return 199.9
}

func AnimalFactory(animalType string) Animal {
    switch animalType {
    case "dog":
        return Dog{}
    case "cat":
        return Cat{}
    default:
        return nil
    }
}

func main() {
    dog := AnimalFactory("dog")
    cat := AnimalFactory("cat")

    fmt.Println("Dog:", dog.Speak(), "Speed:", dog.RunSpeed()) // Output: Dog: Woof! Speed: 99.9
    fmt.Println("Cat:", cat.Speak(), "Speed:", cat.RunSpeed()) // Output: Cat: Meow! Speed: 199.9
}
```

### 5. **LÆ°u Ã½**
- **Kiá»ƒu tráº£ vá»**: Trong Go, khÃ´ng cÃ³ kiá»ƒu `float` chung chung, mÃ  pháº£i lÃ  `float32` hoáº·c `float64`. á» Ä‘Ã¢y, `float64` lÃ  lá»±a chá»n phá»• biáº¿n hÆ¡n.
- **Factory khÃ´ng phá»¥ thuá»™c vÃ o interface chi tiáº¿t**: DÃ¹ interface cÃ³ thÃªm bao nhiÃªu phÆ°Æ¡ng thá»©c (`Speak`, `RunSpeed`, hay gÃ¬ khÃ¡c), Factory chá»‰ cáº§n tráº£ vá» Ä‘Ãºng kiá»ƒu struct lÃ  Ä‘Æ°á»£c.
- **Kiá»ƒm tra `nil`**: Trong vÃ­ dá»¥, náº¿u `animalType` khÃ´ng há»£p lá»‡, Factory tráº£ vá» `nil`. Khi dÃ¹ng, nÃªn kiá»ƒm tra Ä‘á»ƒ trÃ¡nh panic (vÃ­ dá»¥: `if dog != nil`).

### 6. **Káº¿t luáº­n**
Bro Ä‘Ã£ náº¯m Ä‘Ãºng Ã½ tÆ°á»Ÿng: thÃªm `RunSpeed()` vÃ o interface chá»‰ yÃªu cáº§u cáº­p nháº­t cÃ¡c struct Ä‘á»ƒ triá»ƒn khai phÆ°Æ¡ng thá»©c má»›i. Factory thÃ¬ cá»© chill, khÃ´ng cáº§n chá»‰nh gÃ¬ nhiá»u vÃ¬ nÃ³ chá»‰ táº¡o Ä‘á»‘i tÆ°á»£ng. Code tháº¿ nÃ y lÃ  chuáº©n Go, gá»n gÃ ng vÃ  má»Ÿ rá»™ng dá»…!

Náº¿u muá»‘n thÃªm gÃ¬ ná»¯a (nhÆ° con `Bird` vá»›i tá»‘c Ä‘á»™ bay cháº³ng háº¡n), cá»© báº£o mÃ¬nh nha! ğŸš€